<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<meta name="applicable-device" content="pc,mobile">
<title>TAO</title>
</head>
<body style="margin:0;background-color:#fff;-webkit-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;">
<script src="/tao/share.js"></script>
<style>h1{background-color:#ff666d;background:-moz-linear-gradient(left,#fa4dbe 0,#fbaa58 100%);background:-webkit-gradient(linear,left top,left right,color-stop(0,#fa4dbe),color-stop(100%,#fbaa58));background:-webkit-linear-gradient(left,#fa4dbe 0,#fbaa58 100%);background:-o-linear-gradient(left,#fa4dbe 0,#fbaa58 100%);background:-ms-linear-gradient(left,#fa4dbe 0,#fbaa58 100%);background:linear-gradient(to left,#fa4dbe 0,#fbaa58 100%);color:#fff;height:3rem;line-height:3rem;font-size:1rem;height:10vw;line-height:10vw;margin:0;text-align:center;padding:0 1rem;font-size:4vw;overflow:hidden}#body{background-color:#fff}#box{width:100%;position:relative;padding-top:60%}#box #goods_img,#box #qrcode,#box p{position:absolute;top:0;box-sizing:border-box}#box img{width:60%;height:100%;left:0;padding:1rem 0 0 1rem;padding:2vw 0 0 2vw}#box #qrcode,#box p{width:40%;height:auto;right:0;padding:1rem;padding:2vw}#box #qrcode canvas{width:100%;height:auto;position:initial}#box p{top:65%;height:35%;text-align:center;margin:0;padding:.8rem 1rem;padding:1.8vw 2vw;font-size:.8rem;font-size:3.4vw;line-height:3rem;line-height:6vw;color:#404040;overflow:hidden}h2,h3{margin:1rem 0 0 0;margin:2vw 0 0 0;background-color:#fff0f0;background:-moz-linear-gradient(left,#fde6f5 0,#fff0e0 100%);background:-webkit-gradient(linear,left top,left right,color-stop(0,#fde6f5),color-stop(100%,#fff0e0));background:-webkit-linear-gradient(left,#fde6f5 0,#fff0e0 100%);background:-o-linear-gradient(left,#fde6f5 0,#fff0e0 100%);background:-ms-linear-gradient(left,#fde6f5 0,#fff0e0 100%);background:linear-gradient(to left,#fde6f5 0,#fff0e0 100%);color:#fff;padding:1rem;padding:2vw;display:table;width:100%;box-sizing:border-box}h2 span{font-size:1rem;height:2.5rem;line-height:2.5rem;font-size:4vw;height:6vw;line-height:6vw;display:block;float:right;color:#fb7593}h2 span i{background-color:#f98288;background:-moz-linear-gradient(left,#ff5e5e 0,#ff927c 100%);background:-webkit-gradient(linear,left top,left right,color-stop(0,#ff5e5e),color-stop(100%,#ff927c));background:-webkit-linear-gradient(left,#ff5e5e 0,#ff927c 100%);background:-o-linear-gradient(left,#ff5e5e 0,#ff927c 100%);background:-ms-linear-gradient(left,#ff5e5e 0,#ff927c 100%);background:linear-gradient(to left,#ff5e5e 0,#ff927c 100%);color:#fff;border-radius:3px;font-size:.8rem;padding:0 .4rem;height:1.4rem;line-height:1.4rem;margin:.6rem .4rem;font-size:2vw;padding:0 1.2vw;height:4vw;line-height:4vw;margin:1vw;display:inline-block;font-style:initial;float:right}h2 span:first-child{float:left}h3{margin:0;text-align:center;padding:0 0 1.5rem 0;padding:0 0 3vw 0;color:#f98288;font-size:.8rem;font-size:2.8vw}h3 span{display:inline;line-height:1rem;line-height:1vw;border:1px solid #f98288;color:#f98288;padding:.2rem .4rem;padding:.4vw 1vw;margin:.2rem;margin:.3vw .6vw;border-radius:3px;font-size:.8rem;font-size:2vw;box-sizing:border-box;text-align:center}.sk{margin:auto;width:100%;text-align:center;position:fixed;top:0;padding:24% 0;height:100%;background-color:rgba(0,0,0,.3)}.sk .sk-c{width:2.8rem;height:2.8rem;background-color:#fa778f;border-radius:100%;display:inline-block;-webkit-animation:sk 1.4s ease-in-out 0s infinite both;animation:sk 1.4s ease-in-out 0s infinite both}.sk .sk1{-webkit-animation-delay:-.32s;animation-delay:-.32s}.sk .sk2{-webkit-animation-delay:-.16s;animation-delay:-.16s}@-webkit-keyframes sk{0%,100%,80%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}@keyframes sk{0%,100%,80%{-webkit-transform:scale(0);transform:scale(0)}40%{-webkit-transform:scale(1);transform:scale(1)}}</style>
<main id="body">
	<h1>商品标题</h1>
	<div id="box">
		<img id='goods_img' src="/tao/lazyload.gif">
		<span id='qrcode'></span>
		<p>扫描或长按识别二维码<br/><span id="info">了解商品的更多信息</span></p>
	</div>
	<h2>
		<span id='pp'>￥0<i>券后价</i></span>
		<span id='op'>￥0<i>原价</i></span>
		<span id='p'>￥0<i>在售价</i></span>
	</h2>
	<h3>扫码或长按识别二维码领取淘宝优惠券购买</h3>
</main>
<div class="sk">
	<div class="sk-c sk1"></div>
	<div class="sk-c sk2"></div>
	<div class="sk-c sk3"></div>
</div>
<script>function getUrlParam(a){var b=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),c=window.location.search.substr(1).match(b);return null!=c?decodeURI(c[2]):null}function getImgToBase64(a,b){if(1==i2b_scheme)img=new Image,img.crossOrigin="*",img.src=a,img.onload=function(){var d,a=document.createElement("canvas"),c=a.getContext("2d");a.height=img.height,a.width=img.width,c.drawImage(img,0,0,img.width,img.height);try{d=a.toDataURL("image/png"),b(d),a=null}catch(e){a=null}},i2b_scheme=0;else{var c=$.ajax({url:"/?m=plugin&plugin=img&type=base64&url="+a,async:!1});b(c.responseText),i2b_scheme=1}}function qrcodes(a){$("#qrcode").qrcode({render:"canvas",width:500,height:500,text:a})}function body2img(){var a,b,d;if(!is_visible())return setTimeout(body2img,1e3),!1;a=2,b=document.createElement("canvas"),b.width=$(document.body).width()*a,b.height=$(document.body).height()*a,b.getContext("2d").scale(a,a);try{h2c=html2canvas($("#body")[0],{logging:!1,canvas:b,useCORS:!0}).then(function(a){var b=a.toDataURL();b.length<1e4?is_visible()?window.location.reload():setTimeout(body2img,1e3):$("body").html('<img width="100%" src="'+b+'" />')})}catch(c){console.log(c),body2img_retry>0&&(body2img_retry--,d=$("#goods_img").attr("src"),"http"==d.substr(0,4)&&$.getScript("/static/es6-promise.auto.min.js",function(){getImgToBase64(d,function(a){$("#goods_img").attr("src",a),body2img()})}))}}function is_visible(){return $("iframe",window.parent.document).is(":visible")}var state,tag_html,interval;i2b_scheme=1,body2img_retry=1,state=[],state.price=state.title=state.id=state.img=0,img=getUrlParam("img"),""==img&&(img=$("#goods_img").attr("src")),$("#goods_img").attr("src",img),state.img=1,title=decodeURIComponent(getUrlParam("title")),title&&($("h1").html(title),$(document).attr("title",title),state.title=1),oprice=parseFloat(getUrlParam("oprice")),price=parseFloat(getUrlParam("price")),coupon=parseFloat(getUrlParam("coupon")),oprice?($("#op").html("￥"+oprice+"<i>原价</i>"),price==oprice&&$("#pp").html("￥"+price+"<i>低价</i>")):$("#op").hide(),coupon?($("#info").html("领取"+coupon+"元优惠券"),price?($("#pp").html("￥"+(price-coupon).toFixed(2)+"<i>券后价</i>"),$("#p").html("￥"+price+"<i>在售价</i>")):($("#pp").html("￥"+coupon+"<i>优惠券</i>"),$("#p").hide())):price&&(price==oprice?$("#pp").html("￥"+price+"<i>低价</i>"):$("#pp").html("￥"+price+"<i>折扣价</i>"),$("#p").hide()),state.price=1,id=getUrlParam("id"),id?(coupon?qrcodes("https://taobao.hooos.com/go?id="+id):qrcodes("https://taobao.hooos.com/goods_"+id+".html"),state.id=1):(qrcodes("https://taobao.hooos.com"),state.id=1),oprice=getUrlParam("oprice"),oprice&&($("h1").html(title),state.oprice=1),tag=getUrlParam("tag"),tag&&(tag_html="",tags=tag.split(","),tags.forEach(function(a){a&&(tag_html+="<span>"+a+"</span>")}),$("h3").html(tag_html)),interval=setInterval(function(){var a="";state.forEach(function(b){a+=b}),-1==a.indexOf("0")&&(clearInterval(interval),is_visible()?body2img():setTimeout(body2img,1e3))},1e3);</script>
</body>
</html>