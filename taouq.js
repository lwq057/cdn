function lazyload_img(){for(var e=document.querySelectorAll("img"),t=0;t<e.length;t++)e[t].getAttribute("data-original-url")||e[t].getAttribute("data-ll-status")||(e[t].src.indexOf("400x400q90")>0||(-1==e[t].src.indexOf(".alicdn.com")||-1==e[t].src.indexOf(".tbcdn.cn"))&&-1!=e[t].src.indexOf("/imgextra/")?e[t].setAttribute("data-original-url",e[t].src):e[t].setAttribute("data-original-url",e[t].src+"_400x400q90"),e[t].src="https://img.ui.cn/data/file/6/0/9/1223906.gif?imageView2/1/w/420/h/420");lazyload_run()}function lazyload_run(){"object"!=typeof window.lazyloads?window.lazyloads=new LazyLoad({elements_selector:"img",data_src:"original-url",threshold:500,callback_loaded:function(e){e.setAttribute("data-original-url",e.src)},cancel_on_exit:!0}):window.lazyloads.update()}function load_viewer(){$("main>article").length>0&&("object"!=typeof window.viewers?window.viewers=new Viewer($("main>article")[0],{url:"data-original-url",shown:function(){lazyload_run()}}):window.viewers.update())}function desc(e){var t=$("body>main>article>section>div");if($.trim(t.html()).length>20)return!1;if(!e.wdescContent)return null;var i="",a=e.wdescContent,r=/<[^>]*>|<\/[^>]*>/gm;$.each(a.pages,function(e,t){-1!=t.indexOf("</img>")?i+="<img src='"+t.replace(r,"")+"'>":-1!=t.indexOf("</txt>")&&(i+="<p>"+t.replace(r,"")+"</p>")}),i&&(t.html(i),lazyload_img(),load_viewer())}function attr(e){var t=document.querySelector("body>main>article>section>ins");if($.trim(t.innerHTML).length>60)return!1;t.innerHTML="";var i="";if(e.rate&&(i+="<h2>商品评价</h2>"),e.rate.keywords){var a=e.rate.keywords;for(var r in a)i+="<p>"+a[r].count+"位买家觉得：<b>"+a[r].word+"</b></p>"}var a=e.rate.rateList;for(var r in a)i+="<p><q>"+a[r].content+"</q></p>";t.insertAdjacentHTML("beforeend",i);var o="";"{}"!=JSON.stringify(e.props)&&("undefined"!=e.props.groupProps&&$.each(e.props.groupProps[0],function(e,t){o+="<h2>"+e+"</h2>",o+="<ul>",$.each(t,function(e,t){var i=Object.keys(t)[0];o+='<li title="'+t[i]+'">'+i+": "+t[i]+"</li>"}),o+="</ul>"}),e.props.importantProps&&(o+="<h4>产品属性</h4>",o+="<ul>",$.each(e.props.importantProps,function(e,t){o+='<li title="'+t.value+'">'+t.name+": "+t.value+"</li>"}),o+="</ul>")),"{}"!=JSON.stringify(e.props2)&&(void 0!==e.props2.groupProps&&$.each(e.props2.groupProps[0],function(e,t){o+="<h2>"+e+"</h2>",o+="<ul>",$.each(t,function(e,t){var i=Object.keys(t)[0];o+='<li title="'+t[i]+'">'+i+": "+t[i]+"</li>"}),o+="</ul>"}),e.props2.importantProps&&(o+="<h4>产品属性</h4>",o+="<ul>",$.each(e.props2.importantProps,function(e,t){o+='<li title="'+t.value+'">'+t.name+": "+t.value+"</li>"}),o+="</ul>")),o&&t.insertAdjacentHTML("beforeend",o),lazyload_img(),load_viewer()}$('a[href^="/0/"]').attr("target","_blank"),lazyload_img(),$('header form input[type="search"]').ready(function(){if(0==$(this).length)return!1;$('header form input[type="search"]').autocomplete({serviceUrl:"https://suggest.taobao.com/sug?code=utf-8",dataType:"jsonp",paramName:"q",appendTo:$("header form"),width:"100%",transformResult:function(e){return{suggestions:$.map(e.result,function(e){return{value:e[0],data:e[0]}})}}})}),load_viewer();var id=null;document.querySelector("main>article")&&(id=document.querySelector("main>article").getAttribute("id")),id&&($.ajax({url:"https://hws.m.taobao.com/cache/desc/5.0?id="+id,timeout:1e3,tryCount:0,retryLimit:10,cache:!1,async:!1,dataType:"jsonp",jsonp:"callback",success:function(e){if(this.tryCount++,e.sellerId)desc(e);else if(this.tryCount<this.retryLimit)return this.url.length>400&&(this.url="https://hws.m.taobao.com/cache/desc/5.0?id="+id),void $.ajax(this)},error:function(){this.tryCount++,this.url.length>400&&(this.url="https://hws.m.taobao.com/cache/desc/5.0?id="+id),this.tryCount<this.retryLimit&&$.ajax(this)}}),$.ajax({url:'https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D',timeout:1e3,tryCount:0,retryLimit:10,cache:!1,async:!1,dataType:"jsonp",jsonp:"callback",success:function(e){if(this.tryCount++,e.data)attr(e.data);else if(this.tryCount<this.retryLimit)return this.url.length>400&&(this.url='https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D'),void $.ajax(this)},error:function(){this.tryCount++,this.url.length>400&&(this.url='https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D'),this.tryCount<this.retryLimit&&$.ajax(this)}})),$("main>article").ready(function(){var e=$("body>main>article address>p em[c]").length>0?"领券":"购买";if($('body>main>article label[for="model"]').length>0){var t=Math.floor(10*Math.random())+"."+$('input[name="model"]').val()+".:/";$("body>main>article").append('<input id="model" type="checkbox"><dialog><header>淘口令'+e+"</header><section><p>长按或选中右击复制</p><p><b>"+t+"</b></p><p>复制成功打开手机淘宝即可"+e+'</p></section><footer><label id="copymodel"data-clipboard-text="'+t+'">复制</label><label for="model">确定</label></footer></dialog>'),$("#copymodel").ready(function(){if(0==$(this).length)return!1;var e=new ClipboardJS("#copymodel");e.on("success",function(e){document.getElementById("copymodel").innerText="复制成功",$("#copymodel").text("复制成功")}),e.on("error",function(e){$("#copymodel").text("复制失败")})})}if($('body>main>article label[for="qr"]').length>0){var i=$('input[name="u"]').val();"//"==i.substr(0,2)&&(i="https:"+i),i=encodeURIComponent(i);var a="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+i+"&h=400&w=400&logo=https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png&",r=$('input[name="id"]').val(),t=$('input[name="model"]').val(),o=$("body>main>article figure img").attr("data-original-url")||$("body>main>article figure img").attr("src"),n="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+encodeURIComponent("http://"+window.location.host+"/0/?id="+r+"&u="+i+"&model="+t)+"&h=400&w=400&logo="+o+"&";$("body>main>article").append('<input id="qr" type="checkbox"><dialog><header>二维码'+e+'</header><section><input tab="" id="qr-t" type="checkbox"><div tab=""><img src="'+a+'" alt="淘宝APP二维码"><p>[淘宝二维码] 使用淘宝或天猫APP扫码'+e+'</p></div><div tab=""><img src="'+n+'" alt="通用二维码"><p>[通用二维码] 扫描或长按识别二维码'+e+'</p></div></section><footer><label for="qr-t">切换</label> <label for="qr">确定</label></footer></dialog>'),lazyload_run()}if($('body>main>article label[for="share"]').length>0){var l={};l.id=$('input[name="id"]').val(),l.img=$("body>main>article figure img").attr("data-original-url")||$("body>main>article figure img").attr("src"),l.price=$("body>main>article address>p em[p]").text()||0,l.oprice=$("body>main>article address>p em[o]").text()||0,l.coupon=$("body>main>article address>p em[c]").text()||0,l.title=$("body>main>article>h2").text()||$("body>main>article>h1").text();var c="/0/share.html?";$.each(l,function(e,t){c+="&"+e+"="+t}),l.model=$('input[name="model"]').val()||"",l.category=$("body>main>article address>p a[c]").text()||"";var d='0.0<br><img src="'+l.img+'"><br>';d+="#"+l.category+"#"+l.title+"<br>",l.oprice&&(d+="【原售价】"+l.oprice+"元"),l.price?l.coupon?d+="【在售价】"+l.price+"元<br>":d+="【优惠价】"+l.price+"元<br>":d+="【在售价】?元<br>",l.coupon&&(d+="【券后价】"+(l.price-l.coupon).toFixed(2)+"元",d+="【优惠券】"+l.coupon+"元<br>"),l.model&&(d+="【淘口令】"+l.model+"<br>",d+="(复制此内容，打开淘宝或天猫APP，即可"+e+")<br>"),d+="详情："+window.location.href;var i=$('input[name="u"]').val();"//"==i.substr(0,2)&&(i="https:"+i),i=encodeURIComponent(i);var s="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+i+"&h=400&w=400&logo=https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png&";$("body>main>article").append('<input id="share"type="checkbox"><dialog><header>分享文字或图片</header><section><div id="share_div"><input id="share_type"type="checkbox"><div id="share_img" data-iframe="'+c+'"><src src="'+s+'"></div><div id="share_text"><div>'+d+'<input id="copysharetext" type="submit" value="点击复制"></div></div></div></section><footer><label for="share_type">图片/文字</label><label for="share">收起窗口</label></footer></dialog>'),$("#share").click(function(){if(null==document.querySelector("#share_img>iframe")){var e=document.getElementById("share_img"),t=e.getAttribute("data-iframe"),i=document.createElement("iframe");i.src=t,e.appendChild(i),$("#share_img>img").hide()}}),$("#copysharetext").ready(function(){if(0==$(this).length)return!1;var e=new ClipboardJS("#copysharetext",{target:function(e){return document.getElementById("share_text")}});e.on("success",function(e){$("#copysharetext").val("复制成功去分享吧")}),e.on("error",function(e){$("#copysharetext").val("复制失败,请长按或选中右击复制。")})})}}),$("main>article figure").ready(function(){if(0==$("main>article figure img").length)return!1;$("main>article figure").addClass("swiper-wrapper").css("width","100%").parent().addClass("swiper-container").css("overflow","hidden"),$("main>article figure img").addClass("swiper-slide"),$("main>article figure img").css("padding","0"),$("main>article figure").after('<div class="p"></div>'),pics=new Swiper(".swiper-container",{wrapperClass:"swiper-wrapper",slideClass:"swiper-slide",slidesPerView:"auto",direction:"horizontal",pagination:{el:".p",clickable:!0,bulletElement:"a",bulletActiveClass:"active"},centeredSlides:!0,spaceBetween:10,autoplay:!1,grabCursor:!0,mousewheel:!0,clickable:!0,loop:!0}),$(".swiper-wrapper").hover(function(){pics.autoplay.stop()},function(){pics.autoplay.start()})}),$("body").append('<s><i t title="回顶部"></i><i r title="上一页"></i></s>'),$("body>s>i[t]").click(function(){$("body,html").animate({scrollTop:0},400)}),$("body>s>i[r]").click(function(){history.back()}),$(window).scroll(function(){$("body>s").hide(),clearTimeout($.data(this,"scrollTimer")),$.data(this,"scrollTimer",setTimeout(function(){$("body>s").show(),$(window).scrollTop()>100?$("body>s>i[t]").show():$("body>s>i[t]").hide(),document.referrer.indexOf(window.location.host)>0?$("body>s>i[r]").show():$("body>s>i[r]").hide()},800))}),$("body").ready(function(){"/"==window.location.pathname&&$.ajax({url:"/?sitemap=true",cache:!0,async:!0}),function(){var e=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,t=window.location.href,i=document.referrer;if(!e.test(t)){var a="https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif";i?(a+="?r="+encodeURIComponent(document.referrer),t&&(a+="&l="+t)):t&&(a+="?l="+t);(new Image).src=a}}(window),$("body>footer").append('<span id="cnzz_stat_icon_1279114273" style="display:none">cnzz</span>');var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.charset="utf-8",e.src="https://c.cnzz.com/stat.php?id=1279114273&async=1&online=2";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)});
