var id=null;if(document.querySelector("main>article")){id=document.querySelector("main>article").getAttribute("id")}if(id){$.ajax({url:"https://hws.m.taobao.com/cache/desc/5.0?id="+id,timeout:1000,tryCount:0,retryLimit:10,cache:false,async:true,dataType:"jsonp",jsonp:"callback",success:function(a){this.tryCount++;if(a.sellerId){desc(a)}else{if(this.tryCount<this.retryLimit){if(this.url.length>400){this.url="https://hws.m.taobao.com/cache/desc/5.0?id="+id}$.ajax(this);return}}},error:function(){this.tryCount++;if(this.url.length>400){this.url="https://hws.m.taobao.com/cache/desc/5.0?id="+id}if(this.tryCount<this.retryLimit){$.ajax(this)}return}});$.ajax({url:'https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D',timeout:1000,tryCount:0,retryLimit:10,cache:false,async:true,dataType:"jsonp",jsonp:"callback",dataFilter:function(a){if(!a||a.toString().data.indexOf("location")>=0){return false}return a},success:function(a){this.tryCount++;if(a.data){attr(a.data)}else{if(this.tryCount<this.retryLimit){if(this.url.length>400){this.url='https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D'}$.ajax(this);return}}},error:function(){this.tryCount++;if(this.url.length>400){this.url='https://acs.m.taobao.com/h5/mtop.taobao.detail.getdetail/6.0/?data=%7B"itemNumId"%3A"'+id+'"%7D'}if(this.tryCount<this.retryLimit){$.ajax(this)}return}})}$('a[href^="/0/"]').attr("target","_blank");$("img:not([alt])").each(function(){if($(this).siblings("h3").length>0){$(this).attr("alt",$(this).siblings("h3").text())}else{if($(this).siblings("i").length>0){$(this).attr("alt",$(this).siblings("i").text())}else{if($("h1").length>0){$(this).attr("alt",$("h1").text())}}}});if(location.pathname&&location.pathname!="/"){$("body>nav>a").each(function(){if(location.origin+"/"==this.href){return true}if((location.origin+location.pathname).indexOf(this.href)==0){$("body>nav").scrollLeft($(this).offset().left-$(this).width());return false}})}function lazyload_img(){var b=document.querySelectorAll("img");for(var a=0;a<b.length;a++){if(!b[a].getAttribute("data-original-url")&&!b[a].getAttribute("data-ll-status")){if(b[a].src.indexOf("400x400q90")>0||(b[a].src.indexOf(".alicdn.com")==-1||b[a].src.indexOf(".tbcdn.cn")==-1)&&b[a].src.indexOf("/imgextra/")!=-1){b[a].setAttribute("data-original-url",b[a].src)}else{b[a].setAttribute("data-original-url",b[a].src+"_400x400q90")}b[a].src="https://cdn.jsdelivr.net/gh/lwq057/cdn@8.0/taouq.gif"}}lazyload_run()}function lazyload_run(){if(typeof(window.lazyloads)!=="object"){window.lazyloads=new LazyLoad({elements_selector:"img",data_src:"original-url",threshold:500,callback_loaded:function(a){a.setAttribute("data-original-url",a.src)},cancel_on_exit:true})}else{window.lazyloads.update()}}lazyload_img();$('header form input[type="search"]').ready(function(){if($(this).length==0){return false}$('header form input[type="search"]').autocomplete({serviceUrl:"https://suggest.taobao.com/sug?code=utf-8",dataType:"jsonp",paramName:"q",appendTo:$("header form"),width:"100%",transformResult:function(a){return{suggestions:$.map(a.result,function(b){return{value:b[0],data:b[0]}})}}})});function load_viewer(){if($("main>article").length>0){if(typeof(window.viewers)!=="object"){window.viewers=new Viewer($("main>article")[0],{url:"data-original-url",shown:function(){lazyload_run()}})}else{window.viewers.update()}}}load_viewer();function desc(c){var e=$("body>main>article>section>div");if($.trim(e.html()).length>20){return false}if(!c.wdescContent){return null}var a="";var b=c.wdescContent;var d=/<[^>]*>|<\/[^>]*>/gm;$.each(b.pages,function(g,f){if(f.indexOf("</img>")!=-1){a+='<img alt="'+document.title+' - 详情图" src="'+f.replace(d,"")+'">'}else{if(f.indexOf("</txt>")!=-1){a+="<p>"+f.replace(d,"")+"</p>"}}});if(a){e.html(a);lazyload_img();load_viewer()}}function attr(b){var f=document.querySelector("body>main>article>section>ins");if($.trim(f.innerHTML).length>60){return false}f.innerHTML="";var e="";if(b.rate){e+="<h2>商品评价</h2>";if(b.rate.keywords){var a=b.rate.keywords;for(var d in a){e+="<p>"+a[d].count+"位买家觉得：<b>"+a[d].word+"</b></p>"}}var a=b.rate.rateList;for(var d in a){e+="<p><q>"+a[d].content+"</q></p>"}f.insertAdjacentHTML("beforeend",e)}var c="";if(JSON.stringify(b.props)!="{}"){if(b.props.groupProps&&b.props.groupProps!="undefined"){$.each(b.props.groupProps[0],function(h,g){c+="<h2>"+h+"</h2>";c+="<ul>";$.each(g,function(j,i){var k=Object.keys(i)[0];c+='<li title="'+i[k]+'">'+k+": "+i[k]+"</li>"});c+="</ul>"})}if(b.props.importantProps){c+="<h4>产品属性</h4>";c+="<ul>";$.each(b.props.importantProps,function(h,g){c+='<li title="'+g.value+'">'+g.name+": "+g.value+"</li>"});c+="</ul>"}}if(JSON.stringify(b.props2)!="{}"){if(typeof(b.props2.groupProps)!="undefined"){$.each(b.props2.groupProps[0],function(h,g){c+="<h2>"+h+"</h2>";c+="<ul>";$.each(g,function(j,i){var k=Object.keys(i)[0];c+='<li title="'+i[k]+'">'+k+": "+i[k]+"</li>"});c+="</ul>"})}if(b.props2.importantProps){c+="<h4>产品属性</h4>";c+="<ul>";$.each(b.props2.importantProps,function(h,g){c+='<li title="'+g.value+'">'+g.name+": "+g.value+"</li>"});c+="</ul>"}}if(c){f.insertAdjacentHTML("beforeend",c)}lazyload_img();load_viewer()}$("main>article").ready(function(){var c=($("body>main>article address>p em[c]").length>0)?"领券":"购买";if($('body>main>article label[for="model"]').length>0){var e=Math.floor(Math.random()*10)+"."+$('input[name="model"]').val()+".:/";$("body>main>article").append('<input id="model" type="checkbox"><dialog><header>淘口令'+c+"</header><section><p>长按或选中右击复制</p><p><b>"+e+"</b></p><p>复制成功打开手机淘宝即可"+c+'</p></section><footer><label id="copymodel"data-clipboard-text="'+e+'">复制</label><label for="model">确定</label></footer></dialog>');$("#copymodel").ready(function(){if($(this).length==0){return false}var l=new ClipboardJS("#copymodel");l.on("success",function(m){document.getElementById("copymodel").innerText="复制成功";$("#copymodel").text("复制成功")});l.on("error",function(m){$("#copymodel").text("复制失败")})})}if($('body>main>article label[for="qr"]').length>0){var a=$('input[name="u"]').val();if(a.substr(0,2)=="//"){a="https:"+a}a=encodeURIComponent(a);var h="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+a+"&h=400&w=400&logo=https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png&";var b=$('input[name="id"]').val();var e=$('input[name="model"]').val();var d=$("body>main>article figure img").attr("data-original-url")||$("body>main>article figure img").attr("src");var f="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+encodeURIComponent("http://"+window.location.host+"/0/?id="+b+"&u="+a+"&model="+e)+"&h=400&w=400&logo="+d+"&";$("body>main>article").append('<input id="qr" type="checkbox"><dialog><header>二维码'+c+'</header><section><input tab="" id="qr-t" type="checkbox"><div tab=""><img src="'+h+'" alt="淘宝APP二维码"><p>[淘宝二维码] 使用淘宝或天猫APP扫码'+c+'</p></div><div tab=""><img src="'+f+'" alt="通用二维码"><p>[通用二维码] 扫描或长按识别二维码'+c+'</p></div></section><footer><label for="qr-t">切换</label> <label for="qr">确定</label></footer></dialog>');lazyload_run()}if($('body>main>article label[for="share"]').length>0){var k={};k.id=$('input[name="id"]').val();k.img=$("body>main>article figure img").attr("data-original-url")||$("body>main>article figure img").attr("src");k.price=$("body>main>article address>p em[p]").text()||0;k.oprice=$("body>main>article address>p em[o]").text()||0;k.coupon=$("body>main>article address>p em[c]").text()||0;k.title=$("body>main>article>h2").text()||$("body>main>article>h1").text();var g="/0/share.html?";$.each(k,function(m,l){g+="&"+m+"="+l});k.model=$('input[name="model"]').val()||"";k.category=$("body>main>article address>p a[c]").text()||"";var j='0.0<br><img src="'+k.img+'"><br>';j+="#"+k.category+"#"+k.title+"<br>";if(k.oprice){j+="【原售价】"+k.oprice+"元"}if(k.price){if(k.coupon){j+="【在售价】"+k.price+"元<br>"}else{j+="【优惠价】"+k.price+"元<br>"}}else{j+="【在售价】?元<br>"}if(k.coupon){j+="【券后价】"+(k.price-k.coupon).toFixed(2)+"元";j+="【优惠券】"+k.coupon+"元<br>"}if(k.model){j+="【淘口令】"+k.model+"<br>";j+="(复制此内容，打开淘宝或天猫APP，即可"+c+")<br>"}j+="详情："+window.location.href;var a=$('input[name="u"]').val();if(a.substr(0,2)=="//"){a="https:"+a}a=encodeURIComponent(a);var i="https://api.qrserver.com/v1/create-qr-code/?size=400x400&data="+a+"&h=400&w=400&logo=https://img.alicdn.com/tps/i3/T1OjaVFl4dXXa.JOZB-114-114.png&";$("body>main>article").append('<input id="share"type="checkbox"><dialog><header>分享文字或图片</header><section><div id="share_div"><input id="share_type"type="checkbox"><div id="share_img" data-iframe="'+g+'"><src src="'+i+'"></div><div id="share_text"><div>'+j+'<input id="copysharetext" type="submit" value="点击复制"></div></div></div></section><footer><label for="share_type">图片/文字</label><label for="share">收起窗口</label></footer></dialog>');$("#share").click(function(){if(document.querySelector("#share_img>iframe")==null){var n=document.getElementById("share_img");var l=n.getAttribute("data-iframe");var m=document.createElement("iframe");m.src=l;n.appendChild(m);$("#share_img>img").hide()}});$("#copysharetext").ready(function(){if($(this).length==0){return false}var l=new ClipboardJS("#copysharetext",{target:function(m){return document.getElementById("share_text")}});l.on("success",function(m){$("#copysharetext").val("复制成功去分享吧")});l.on("error",function(m){$("#copysharetext").val("复制失败,请长按或选中右击复制。")})})}});$("main>article figure").ready(function(){if($("main>article figure img").length==0){return false}$("main>article figure").addClass("swiper-wrapper").css("width","100%").parent().addClass("swiper-container").css("overflow","hidden");$("main>article figure img").addClass("swiper-slide");$("main>article figure img").css("padding","0");$("main>article figure").after('<div class="p"></div>');pics=new Swiper(".swiper-container",{wrapperClass:"swiper-wrapper",slideClass:"swiper-slide",slidesPerView:"auto",direction:"horizontal",pagination:{el:".p",clickable:true,bulletElement:"a",bulletActiveClass:"active"},centeredSlides:true,spaceBetween:10,autoplay:false,grabCursor:true,mousewheel:true,clickable:true,loop:true});$(".swiper-wrapper").hover(function(){pics.autoplay.stop()},function(){pics.autoplay.start()})});$("body").append('<s><i t title="回顶部"></i><i r title="上一页"></i></s>');$("body>s>i[t]").click(function(){$("body,html").animate({scrollTop:0},400)});$("body>s>i[r]").click(function(){history.back()});$(window).scroll(function(){$("body>s").hide();clearTimeout($.data(this,"scrollTimer"));$.data(this,"scrollTimer",setTimeout(function(){$("body>s").show();if($(window).scrollTop()>100){$("body>s>i[t]").show()}else{$("body>s>i[t]").hide()}if(document.referrer.indexOf(window.location.host)>0){$("body>s>i[r]").show()}else{$("body>s>i[r]").hide()}},800))});$("body").ready(function(){if(window.location.pathname=="/"){$.ajax({url:"/?sitemap=true",cache:true,async:true})}!function(){var g=/([http|https]:\/\/[a-zA-Z0-9\_\.]+\.baidu\.com)/gi,f=window.location.href,d=document.referrer;if(!g.test(f)){var h="https://sp0.baidu.com/9_Q4simg2RQJ8t7jm9iCKT-xh_/s.gif";d?(h+="?r="+encodeURIComponent(document.referrer),f&&(h+="&l="+f)):f&&(h+="?l="+f);var c=new Image;c.src=h}}(window);$("body>footer").append('<span id="cnzz_stat_icon_1279114273" style="display:none">cnzz</span>');var a=document.createElement("script");a.type="text/javascript";a.async=true;a.charset="utf-8";a.src="https://c.cnzz.com/stat.php?id=1279114273&async=1&online=2";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)});
